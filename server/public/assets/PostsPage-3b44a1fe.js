import{g as oe,a as re,_ as A,u as Re,b as f,c as $,j as a,s as _,B as ke,d as S,r as ne,e as ie,f as we,h as K,i as F,k as le,l as M,m as O,A as ce,n as Q,o as q,I as de,R as j,C as ue,p as T,q as Be,t as Fe,v as _e,L as U,w as J,x as pe,y as Me,z as Oe,D as V,E as ge,F as xe,G as qe,H as Te,J as Ee,K as X,M as Y}from"./index-108ef3d0.js";import{p as L,a as fe,C as me,t as E,b as ve,u as Ke,c as Ue,d as Ae,P as Qe,e as Ve,f as De,T as We,g as Z}from"./PostTagSelect-cb5b3bc8.js";import{A as ye}from"./AlertTitle-f94e8cb7.js";import"./Header-6aeb6c6a.js";import"./FileUploadBody-f68dc815.js";function Ge(e){return oe("MuiPagination",e)}re("MuiPagination",["root","ul","outlined","text"]);const He=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Je(e={}){const{boundaryCount:s=1,componentName:t="usePagination",count:o=1,defaultPage:n=1,disabled:i=!1,hideNextButton:d=!1,hidePrevButton:r=!1,onChange:l,page:c,showFirstButton:u=!1,showLastButton:m=!1,siblingCount:y=1}=e,x=A(e,He),[g,R]=Re({controlled:c,default:n,name:t,state:"page"}),z=(p,C)=>{c||R(C),l&&l(p,C)},b=(p,C)=>{const Se=C-p+1;return Array.from({length:Se},(Va,Le)=>p+Le)},I=b(1,Math.min(s,o)),h=b(Math.max(o-s+1,s+1),o),k=Math.max(Math.min(g-y,o-s-y*2-1),s+2),N=Math.min(Math.max(g+y,s+y*2+2),h.length>0?h[0]-2:o-1),w=[...u?["first"]:[],...r?[]:["previous"],...I,...k>s+2?["start-ellipsis"]:s+1<o-s?[s+1]:[],...b(k,N),...N<o-s-1?["end-ellipsis"]:o-s>s?[o-s]:[],...h,...d?[]:["next"],...m?["last"]:[]],B=p=>{switch(p){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return o;default:return null}},P=w.map(p=>typeof p=="number"?{onClick:C=>{z(C,p)},type:"page",page:p,selected:p===g,disabled:i,"aria-current":p===g?"true":void 0}:{onClick:C=>{z(C,B(p))},type:p,page:B(p),selected:!1,disabled:i||p.indexOf("ellipsis")===-1&&(p==="next"||p==="last"?g>=o:g<=1)});return f({items:P},x)}function Xe(e){return oe("MuiPaginationItem",e)}const Ye=re("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),v=Ye,ee=$(a.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),ae=$(a.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),se=$(a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),te=$(a.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Ze=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],be=(e,s)=>{const{ownerState:t}=e;return[s.root,s[t.variant],s[`size${F(t.size)}`],t.variant==="text"&&s[`text${F(t.color)}`],t.variant==="outlined"&&s[`outlined${F(t.color)}`],t.shape==="rounded"&&s.rounded,t.type==="page"&&s.page,(t.type==="start-ellipsis"||t.type==="end-ellipsis")&&s.ellipsis,(t.type==="previous"||t.type==="next")&&s.previousNext,(t.type==="first"||t.type==="last")&&s.firstLast]},ea=e=>{const{classes:s,color:t,disabled:o,selected:n,size:i,shape:d,type:r,variant:l}=e,c={root:["root",`size${F(i)}`,l,d,t!=="standard"&&`${l}${F(t)}`,o&&"disabled",n&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[r]],icon:["icon"]};return le(c,Xe,s)},aa=_("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:be})(({theme:e,ownerState:s})=>f({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${v.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},s.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},s.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),sa=_(ke,{name:"MuiPaginationItem",slot:"Root",overridesResolver:be})(({theme:e,ownerState:s})=>f({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${v.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${v.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${v.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:S(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${v.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:S(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${v.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},s.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},s.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},s.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:s})=>f({},s.variant==="text"&&{[`&.${v.selected}`]:f({},s.color!=="standard"&&{color:(e.vars||e).palette[s.color].contrastText,backgroundColor:(e.vars||e).palette[s.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[s.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[s.color].main}},[`&.${v.focusVisible}`]:{backgroundColor:(e.vars||e).palette[s.color].dark}},{[`&.${v.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},s.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${v.selected}`]:f({},s.color!=="standard"&&{color:(e.vars||e).palette[s.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / 0.5)`:S(e.palette[s.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:S(e.palette[s.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:S(e.palette[s.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${v.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:S(e.palette[s.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${v.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),ta=_("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,s)=>s.icon})(({theme:e,ownerState:s})=>f({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},s.size==="small"&&{fontSize:e.typography.pxToRem(18)},s.size==="large"&&{fontSize:e.typography.pxToRem(22)})),oa=ne.forwardRef(function(s,t){const o=ie({props:s,name:"MuiPaginationItem"}),{className:n,color:i="standard",component:d,components:r={},disabled:l=!1,page:c,selected:u=!1,shape:m="circular",size:y="medium",slots:x={},type:g="page",variant:R="text"}=o,z=A(o,Ze),b=f({},o,{color:i,disabled:l,selected:u,shape:m,size:y,type:g,variant:R}),I=we(),h=ea(b),N=(I.direction==="rtl"?{previous:x.next||r.next||te,next:x.previous||r.previous||se,last:x.first||r.first||ee,first:x.last||r.last||ae}:{previous:x.previous||r.previous||se,next:x.next||r.next||te,first:x.first||r.first||ee,last:x.last||r.last||ae})[g];return g==="start-ellipsis"||g==="end-ellipsis"?a.jsx(aa,{ref:t,ownerState:b,className:K(h.root,n),children:"…"}):a.jsxs(sa,f({ref:t,ownerState:b,component:d,disabled:l,className:K(h.root,n)},z,{children:[g==="page"&&c,N?a.jsx(ta,{as:N,ownerState:b,className:h.icon}):null]}))}),he=oa,ra=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],na=e=>{const{classes:s,variant:t}=e;return le({root:["root",t],ul:["ul"]},Ge,s)},ia=_("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.root,s[t.variant]]}})({}),la=_("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,s)=>s.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function ca(e,s,t){return e==="page"?`${t?"":"Go to "}page ${s}`:`Go to ${e} page`}const da=ne.forwardRef(function(s,t){const o=ie({props:s,name:"MuiPagination"}),{boundaryCount:n=1,className:i,color:d="standard",count:r=1,defaultPage:l=1,disabled:c=!1,getItemAriaLabel:u=ca,hideNextButton:m=!1,hidePrevButton:y=!1,renderItem:x=P=>a.jsx(he,f({},P)),shape:g="circular",showFirstButton:R=!1,showLastButton:z=!1,siblingCount:b=1,size:I="medium",variant:h="text"}=o,k=A(o,ra),{items:N}=Je(f({},o,{componentName:"Pagination"})),w=f({},o,{boundaryCount:n,color:d,count:r,defaultPage:l,disabled:c,getItemAriaLabel:u,hideNextButton:m,hidePrevButton:y,renderItem:x,shape:g,showFirstButton:R,showLastButton:z,siblingCount:b,size:I,variant:h}),B=na(w);return a.jsx(ia,f({"aria-label":"pagination navigation",className:K(B.root,i),ownerState:w,ref:t},k,{children:a.jsx(la,{className:B.ul,ownerState:w,children:N.map((P,p)=>a.jsx("li",{children:x(f({},P,{color:d,"aria-label":u(P.type,P.page,P.selected),shape:g,size:I,variant:h}))},p))})}))}),ua=da,pa=$(a.jsx("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2v2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1V21z"}),"BookmarkAdd"),ga=$(a.jsx("path",{d:"m19 21-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1V21zM17.83 9 15 6.17l1.41-1.41 1.41 1.41 3.54-3.54 1.41 1.41L17.83 9z"}),"BookmarkAdded"),xa=$(a.jsx("path",{d:"m12 17.27 4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72 3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5z"}),"StarRounded");var D={},fa=O;Object.defineProperty(D,"__esModule",{value:!0});var je=D.default=void 0,ma=fa(M()),va=a,ya=(0,ma.default)((0,va.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"}),"PublicRounded");je=D.default=ya;var W={},ba=O;Object.defineProperty(W,"__esModule",{value:!0});var Pe=W.default=void 0,ha=ba(M()),ja=a,Pa=(0,ha.default)((0,ja.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z"}),"PersonRounded");Pe=W.default=Pa;function Ce(e){const{isLoading:s,isError:t,error:o,isSuccess:n,posts:i,renderPost:d}=e;return a.jsxs(a.Fragment,{children:[s&&a.jsx("div",{children:"Loading..."}),t&&a.jsxs(ce,{severity:"error",children:[a.jsx(ye,{children:"Error while loading posts"}),o==null?void 0:o.message]}),n&&(i.length>0?i.map(r=>d(r)):a.jsx("div",{children:"No posts here yet."}))]})}var G={},Ca=O;Object.defineProperty(G,"__esModule",{value:!0});var Ne=G.default=void 0,Na=Ca(M()),$a=a,za=(0,Na.default)((0,$a.jsx)("path",{d:"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z"}),"Panorama");Ne=G.default=za;var H={},Ia=O;Object.defineProperty(H,"__esModule",{value:!0});var $e=H.default=void 0,Sa=Ia(M()),La=a,Ra=(0,Sa.default)((0,La.jsx)("path",{d:"m19.65 9.04-4.84-.42-1.89-4.45c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5 4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.73 3.67-3.18c.67-.58.32-1.68-.56-1.75zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarOutlineRounded");$e=H.default=Ra;function ka(e){const{postId:s,postSlug:t}=e,{currentUser:o}=Q(),n=q(),{mutate:i,isPending:d}=wa(),r=()=>{i({postId:s},{onSuccess:async()=>{const l=L.posts.globalFeed.root(),c=L.post.slug(t);await n.cancelQueries({queryKey:l}),await n.cancelQueries({queryKey:c}),n.setQueriesData({queryKey:l},u=>u&&{...u,items:u.items.map(m=>m.id===s?{...m,isFavorite:!0}:m)}),n.setQueriesData({queryKey:c},u=>u&&{...u,isFavorite:!0})},onError:l=>{console.log(l)}})};return a.jsxs(de,{sx:{position:"relative"},size:"small",href:o?"":j.auth.signIn,onClick:o?r:void 0,children:[d&&a.jsx(ue,{color:"warning",sx:{position:"absolute"}}),a.jsx($e,{sx:{fontSize:28}})]})}const wa=()=>T({mutationKey:L.mutations.favorite(),mutationFn:async({postId:e})=>await fe.favoritePostById(e)}),Ba=()=>T({mutationKey:L.mutations.unfavorite(),mutationFn:async({postId:e})=>await fe.unfavoritePostById(e)});function Fa(e){const{postId:s,postSlug:t}=e,o=q(),{mutate:n,isPending:i}=Ba(),d=()=>{n({postId:s},{onSuccess:async()=>{const r=L.posts.globalFeed.root(),l=L.post.slug(t);await o.cancelQueries({queryKey:r}),await o.cancelQueries({queryKey:l}),o.setQueriesData({queryKey:r},c=>c&&{...c,items:c.items.map(u=>u.id===s?{...u,isFavorite:!1}:u)}),o.setQueriesData({queryKey:l},c=>c&&{...c,isFavorite:!1})},onError:r=>{console.log(r)}})};return a.jsxs(de,{sx:{position:"relative"},color:"warning",size:"small",onClick:d,children:[i&&a.jsx(ue,{color:"warning",sx:{position:"absolute"}}),a.jsx(xa,{sx:{fontSize:28}})]})}function ze({post:e}){const{title:s,image:t,author:o,created:n,description:i,updated:d,tags:r,slug:l,isFavorite:c}=e;return a.jsx("article",{className:"border-b border-gray-200",children:a.jsx("div",{className:"py-5 ",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"w-36 h-36 rounded-md overflow-clip mr-6 shrink-0",children:t?a.jsx("img",{className:"object-cover object-center w-full h-full",src:t}):a.jsx("div",{className:"w-full h-full bg-primary-100 flex items-center justify-center",children:a.jsx(Ne,{className:"text-primary-400",sx:{fontSize:40}})})}),a.jsxs("div",{className:"w-full",children:[a.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[o&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Be,{className:"mr-2",alt:o.name,children:Fe(o.name),sx:{width:24,height:24,fontSize:10,bgcolor:_e(o.name)}}),a.jsx(U,{className:"text-sm font-semibold text-foreground-secondary hover:text-foreground-primary",to:j.users.profile(o.slug),children:o.name})]}),a.jsx("span",{className:"text-foreground-secondary",children:"•"})]}),a.jsxs("p",{className:"text-sm uppercase text-foreground-secondary",children:[a.jsx("span",{children:J(n)})," ",d&&a.jsxs("span",{children:["(Updated ",J(d),")"]})]})]}),a.jsx("h2",{className:"text-xl font-semibold mb-1",children:a.jsx(U,{className:"hover:underline text-foreground-primary hover:text-primary-600",to:j.posts.slug(l),children:s})}),a.jsx("p",{className:"mb-2 text-foreground-primary",children:i}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"flex gap-1 w-full",children:r.map(u=>a.jsx(me,{sx:{fontSize:"0.875rem"},component:"a",label:u.name,variant:"filled",size:"small",color:"default",href:j.tags.slug(u.slug),clickable:!0},u.id))}),c?a.jsx(Fa,{postId:e.id,postSlug:e.slug}):a.jsx(ka,{postId:e.id,postSlug:e.slug})]})]})]})})})}const _a=()=>T({mutationKey:E.mutations.follow(),mutationFn:async({tagId:e})=>await ve.followById(e)});function Ma(e){const{tagId:s,tagSlug:t}=e,{currentUser:o}=Q(),{mutate:n,isPending:i}=_a(),d=q(),r=()=>{n({tagId:s},{onSuccess:()=>{const l=E.tags.slug(t);d.cancelQueries({queryKey:l}),d.setQueryData(l,c=>c&&{...c,isFollowing:!0,followersCount:c.followersCount+1})},onError:l=>{console.log(l)}})};return a.jsx(pe,{startIcon:a.jsx(pa,{}),variant:"contained",disableElevation:!0,loading:i,onClick:r,href:o?void 0:j.auth.signIn,children:"Follow"})}function Oa(e){const{tagId:s,tagSlug:t}=e,{currentUser:o}=Q(),{mutate:n,isPending:i}=qa(),d=q(),r=()=>{n({tagId:s},{onSuccess:()=>{const l=E.tags.slug(t);d.cancelQueries({queryKey:l}),d.setQueryData(l,c=>c&&{...c,isFollowing:!1,followersCount:c.followersCount-1})},onError:l=>{console.log(l)}})};return a.jsx(pe,{loading:i,startIcon:a.jsx(ga,{}),variant:"contained",disableElevation:!0,onClick:r,href:o?void 0:j.auth.signIn,children:"Following"})}const qa=()=>T({mutationKey:E.mutations.unfollow(),mutationFn:async({tagId:e})=>await ve.unfollowById(e)});function Ta(e){const{tag:s,className:t,...o}=e,{id:n,name:i,slug:d,followersCount:r,postsCount:l,isFollowing:c}=s;return a.jsx("div",{className:Me("border-b border-gray-200",t),...o,children:a.jsxs("div",{className:"mb-5 text-center",children:[a.jsx("h2",{className:"text-foreground-primary text-4xl font-semibold mb-3",children:i}),a.jsxs("p",{className:"text-foreground-secondary text-lg mb-2",children:["Topic • ",r," followers • ",l," posts"]}),c?a.jsx(Oa,{tagId:n,tagSlug:d}):a.jsx(Ma,{tagId:n,tagSlug:d})]})})}function Ea(){var n;const{data:e,isLoading:s,isError:t,error:o}=Ke({page:1,limit:8,orderBy:"popular"});return s?a.jsx("p",{children:"Loading..."}):t?a.jsxs(ce,{severity:"error",children:[a.jsx(ye,{children:"Error loading popular tags"}),(n=o.response)==null?void 0:n.data.message]}):a.jsxs("div",{children:[a.jsx("h5",{className:"mb-2 font-semibold",children:"Popular topics"}),a.jsx("div",{className:"flex flex-wrap gap-x-1 gap-y-2",children:e&&e.meta.itemsCount>0?e.items.map(i=>a.jsx(me,{label:i.name,component:"a",sx:{fontSize:"0.875rem"},variant:"filled",href:j.tags.slug(i.slug),clickable:!0},i.id)):a.jsx("p",{children:"No tags found"})})]})}function Ka(e){const{slug:s,...t}=e,{data:o,isLoading:n,isError:i}=Ue(s);return n?a.jsx("div",{children:"Loading..."}):i||!o?a.jsx("div",{children:"Error"}):(console.log(o),a.jsx(Ta,{...t,tag:o}))}const Ie=e=>{const{page:s,limit:t,pagesCount:o,itemsCount:n,...i}=e,d=Oe(),r=new URLSearchParams(d.search),l=(s-1)*t,c=l+t,u=c>n?n:c;return a.jsx("div",{...i,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-foreground-secondary",children:["Showing"," ",a.jsxs("span",{className:"font-semibold text-foreground-primary",children:[l+1," "]}),"to"," ",a.jsxs("span",{className:"font-semibold text-foreground-primary",children:[u," "]}),"of"," ",a.jsxs("span",{className:"font-semibold text-foreground-primary",children:[n," "]}),"results"]})}),a.jsx(ua,{count:o,page:s,shape:"rounded",renderItem:m=>{const y=m.page||1;r.set("page",y.toString());const x=`${d.pathname}?${r.toString()}`;return a.jsx(he,{component:U,to:x,...m})}})]})})};function Ua(){var r;const[e]=V(),{tagSlug:s}=ge(),{data:t,isLoading:o,isError:n,error:i,isSuccess:d}=Ae({...xe(e),limit:10,tag:s});return a.jsxs(a.Fragment,{children:[a.jsx(Ce,{isLoading:o,isError:n,error:(r=i==null?void 0:i.response)==null?void 0:r.data,isSuccess:d&&t!==void 0,posts:t==null?void 0:t.items,renderPost:l=>a.jsx(ze,{post:l},l.id)}),t&&t.meta&&t.meta.pagesCount>1&&a.jsx(Ie,{className:"mt-2.5",...t.meta})]})}function Aa(){const e=qe(),[s]=V(),{control:t,handleSubmit:o,reset:n}=Te({resolver:Ee(Ve),defaultValues:{query:"",orderBy:"recent"},values:{query:s.get("query")||"",orderBy:s.get("orderBy")||"recent"}}),i=r=>{r.query&&s.set("query",r.query),r.orderBy&&s.set("orderBy",r.orderBy),e({search:s.toString()})},d=()=>{n(),e({search:""})};return a.jsx("div",{className:"mt-3.5 mb-2",children:a.jsx("form",{onSubmit:o(i),children:a.jsxs("div",{className:"grid grid-cols-[7fr_3fr_auto] gap-5 items-center",children:[a.jsx(Qe,{control:t,isLoading:!1}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(X,{onClick:d,children:"Clear"}),a.jsx(X,{type:"submit",variant:"contained",size:"small",disableElevation:!0,children:"Filter"})]})]})})})}function Qa(){var d;const[e]=V(),{data:s,isLoading:t,isError:o,error:n,isSuccess:i}=De({...xe(e),limit:10});return a.jsxs(a.Fragment,{children:[a.jsx(Ce,{isLoading:t,isError:o,error:(d=n==null?void 0:n.response)==null?void 0:d.data,isSuccess:i&&s!==void 0,posts:s==null?void 0:s.items,renderPost:r=>a.jsx(ze,{post:r},r.id)}),s&&s.meta&&s.meta.pagesCount>1&&a.jsx(Ie,{className:"mt-2.5",...s.meta})]})}function Xa(e){const{userFeed:s}=e,{tagSlug:t}=ge();return a.jsxs("div",{className:"grid grid-cols-[7fr_3fr] gap-x-14 items-start",children:[t&&a.jsx(Ka,{className:"col-span-2 mb-10",slug:t}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs(We,{value:s?1:0,children:[a.jsx(Z,{sx:{minHeight:48},icon:a.jsx(je,{fontSize:"small"}),iconPosition:"start",label:"Global",href:j.posts.index}),a.jsx(Z,{sx:{minHeight:48},icon:a.jsx(Pe,{fontSize:"small"}),iconPosition:"start",label:"Personal",href:j.posts.personal})]}),a.jsx(Y,{}),a.jsx(Aa,{}),s?a.jsx(Qa,{}):a.jsx(Ua,{})]}),a.jsxs("div",{className:"border-l border-gray-200 px-5 flex flex-col gap-y-5 sticky top-3 left-0 h-screen",children:[a.jsx(Ea,{}),a.jsx(Y,{})]})]})}export{Xa as default};
